<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>rotary.client documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Rotary 0.4.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="rotary.client.html"><span>rotary.client</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="rotary.client.html#var-batch-get-item"><span>batch-get-item</span></a></li><li><a href="rotary.client.html#var-batch-write-item"><span>batch-write-item</span></a></li><li><a href="rotary.client.html#var-create-table"><span>create-table</span></a></li><li><a href="rotary.client.html#var-delete-item"><span>delete-item</span></a></li><li><a href="rotary.client.html#var-delete-table"><span>delete-table</span></a></li><li><a href="rotary.client.html#var-describe-table"><span>describe-table</span></a></li><li><a href="rotary.client.html#var-ensure-table"><span>ensure-table</span></a></li><li><a href="rotary.client.html#var-get-item"><span>get-item</span></a></li><li><a href="rotary.client.html#var-list-tables"><span>list-tables</span></a></li><li><a href="rotary.client.html#var-put-item"><span>put-item</span></a></li><li><a href="rotary.client.html#var-query"><span>query</span></a></li><li><a href="rotary.client.html#var-scan"><span>scan</span></a></li><li><a href="rotary.client.html#var-update-table"><span>update-table</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>rotary.client documentation</h2><pre class="doc">Amazon DynamoDB client functions.
</pre><div class="public" id="var-batch-get-item"><h3>batch-get-item</h3><div class="usage"><code>(batch-get-item cred requests)</code></div><pre class="doc">Retrieve a batch of items in a single request. DynamoDB limits
apply - 100 items and 1MB total size limit. Requested items
which were elided by Amazon are available in the returned map
key :unprocessed-keys.

Examples:
(batch-get-item cred
  {:users {:keys [&quot;alice&quot; &quot;bob&quot;]
   :key-name &quot;names&quot;}
   :posts {:key-name &quot;id&quot;
   :keys [1 2 3]
   :attrs [&quot;timestamp&quot; &quot;subject&quot;]
   :consistent true}})</pre></div><div class="public" id="var-batch-write-item"><h3>batch-write-item</h3><div class="usage"><code>(batch-write-item cred &amp; requests)</code></div><pre class="doc">Execute a batch of Puts and/or Deletes in a single request.
DynamoDB limits apply - 25 items max. No transaction
guarantees are provided, nor conditional puts.
Example:
(batch-write-item cred
  [:put :users {:user-id 1 :username &quot;sally&quot;}]
  [:put :users {:user-id 2 :username &quot;jane&quot;}]
  [:delete :users {:hash-key 3}])</pre></div><div class="public" id="var-create-table"><h3>create-table</h3><div class="usage"><code>(create-table cred {:keys [name hash-key range-key throughput indexes]})</code></div><pre class="doc">Create a table in DynamoDB with the given map of properties. The properties
available are:
  :name - the name of the table (required)
  :hash-key - a map that defines the hash key name and type (required)
  :range-key - a map that defines the range key name and type (optional)
  :throughput - a map that defines the read and write throughput (required)
  :indexes - a vector of maps that defines local secondary indexes on a table (optional)

The hash-key and range-key definitions are maps with the following keys:
  :name - the name of the key
  :type - the type of the key (:s, :n, :ss, :ns)

Where :s is a string type, :n is a number type, and :ss and :ns are sets of
strings and number respectively. 

The throughput is a map with two keys:
  :read - the provisioned number of reads per second
  :write - the provisioned number of writes per second

The indexes vector is a vector of maps with two keys and two further optional ones
  :name - the name of the Local Secondary Index (required)
  :range-key - a map that defines the range key name and type (required)
  :projection - keyword that defines the projection may be:
  :all, :keys_only, :include (optional - default is :keys-only)
  :included-attrs - a vector of attribute names when :projection is :include (optional)</pre></div><div class="public" id="var-delete-item"><h3>delete-item</h3><div class="usage"><code>(delete-item cred table hash-key)</code></div><pre class="doc">Delete an item from a DynamoDB table by its hash key.
</pre></div><div class="public" id="var-delete-table"><h3>delete-table</h3><div class="usage"><code>(delete-table cred name)</code></div><pre class="doc">Delete a table in DynamoDB with the given name.
</pre></div><div class="public" id="var-describe-table"><h3>describe-table</h3><div class="usage"><code>(describe-table cred name)</code></div><pre class="doc">Returns a map describing the table in DynamoDB with the given name, or nil
if the table does not exist.</pre></div><div class="public" id="var-ensure-table"><h3>ensure-table</h3><div class="usage"><code>(ensure-table cred {name :name, :as properties})</code></div><pre class="doc">Creates the table if it does not already exist.
</pre></div><div class="public" id="var-get-item"><h3>get-item</h3><div class="usage"><code>(get-item cred table hash-key)</code></div><pre class="doc">Retrieve an item from a DynamoDB table by its hash key.
hash-key should be specified as a map of {:attr-name value}.</pre></div><div class="public" id="var-list-tables"><h3>list-tables</h3><div class="usage"><code>(list-tables cred)</code></div><pre class="doc">Return a list of tables in DynamoDB.
</pre></div><div class="public" id="var-put-item"><h3>put-item</h3><div class="usage"><code>(put-item cred table item)</code></div><pre class="doc">Add an item (a Clojure map) to a DynamoDB table.
</pre></div><div class="public" id="var-query"><h3>query</h3><div class="usage"><code>(query cred table hash-key &amp; range-and-options)</code></div><pre class="doc">Return the items in a DynamoDB table matching the supplied hash key,
defined in the form {&quot;hash-attr&quot; hash-value}.
Can specify a range clause if the table has a range-key ie. `(&quot;range-attr&quot; &gt;= 234)
Takes the following options:
  :order - may be :asc or :desc (defaults to :asc)
  :attrs - limit the values returned to the following attribute names
  :limit - the maximum number of items to return
  :after - only return results after this key
  :consistent - return a consistent read if logical true
  :index - the secondary index to query

The items are returned as a map with the following keys:
  :items - the list of items returned
  :count - the count of items matching the query
  :last-key - the last evaluated key (useful for paging)</pre></div><div class="public" id="var-scan"><h3>scan</h3><div class="usage"><code>(scan cred table &amp; [options])</code></div><pre class="doc">Return the items in a DynamoDB table. Takes the following options:
  :limit - the maximum number of items to return
  :after - only return results after this key

The items are returned as a map with the following keys:
  :items - the list of items returned
  :count - the count of items matching the query
  :last-key - the last evaluated key (useful for paging) </pre></div><div class="public" id="var-update-table"><h3>update-table</h3><div class="usage"><code>(update-table cred {:keys [name throughput]})</code></div><pre class="doc">Update a table in DynamoDB with the given name. Only the throughput may be
updated. The throughput values can be increased by no more than a factor of
two over the current values (e.g. if your read throughput was 20, you could
only set it from 1 to 40). See create-table.</pre></div></div></body></html>